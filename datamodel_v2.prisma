datasource db {
  provider = "postgres"
  url      = "postgresql://postgres:prisma@localhost:5432/"
}

generator js {
  provider        = "prisma-client-js"
  previewFeatures = ["microsoftSqlServer", "mongodb", "orderByRelation", "napi", "selectRelationCount", "orderByAggregateGroup", "interactiveTransactions"]
}

model Tenant {
  id   String @id @default(cuid())
  name String

  foos Foo[]
  bars Bar[]
}

model Foo {
  id       String @id @default(cuid())
  tenantId String

  bar    Bar?
  tenant Tenant @relation(fields: [tenantId], references: [id])

  @@unique([tenantId, id])
}

model Bar {
  id       String @id @default(cuid())
  fooId    String
  tenantId String

  foo    Foo    @relation(fields: [tenantId, fooId], references: [tenantId, id])
  tenant Tenant @relation(fields: [tenantId], references: [id])

  @@unique([tenantId, id])
}

model A {
  id      String @id
  field_a String
  b       B?

  @@unique([field_a, id])
}

model B {
  id      String @id
  a_id    String
  field_b String
  a       A      @relation(fields: [field_b, a_id], references: [field_a, id])

  @@unique([field_b, id])
}
